{"version":3,"sources":["utils/isDefined.ts","Sender.ts","App.tsx","index.tsx"],"names":["isDefined","value","undefined","permissions","Sender","this","socket","console","log","sensors","data","Accelerometer","x","y","z","Gyroscope","LinearAccelerationSensor","AbsoluteOrientationSensor","quaternion","w","RelativeOrientationSensor","send","io","on","message","id","connect","frequency","Promise","all","map","perm","a","navigator","query","name","result","warn","then","Object","values","forEach","sensor","start","catch","error","setInterval","App","props","state","create","forceUpdate","className","onClick","screenfull","isEnabled","request","React","Component","location","window","protocol","href","includes","replace","substring","length","ReactDOM","render","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.93471bae.chunk.js","sourcesContent":["export function isDefined(value: any) {\r\n    if (value === undefined) return false;\r\n    if (value === null) return false;\r\n    return true;\r\n}\r\n","import {\r\n    Accelerometer,\r\n    Gyroscope,\r\n    LinearAccelerationSensor,\r\n    AbsoluteOrientationSensor,\r\n    RelativeOrientationSensor,\r\n} from \"motion-sensors-polyfill\";\r\nimport { io, Socket } from \"socket.io-client\";\r\nimport { isDefined } from \"./utils/isDefined\";\r\n\r\nexport type Sensors = {\r\n    Accelerometer: Accelerometer;\r\n    Gyroscope: Gyroscope;\r\n    LinearAccelerationSensor: LinearAccelerationSensor;\r\n    AbsoluteOrientationSensor: AbsoluteOrientationSensor;\r\n    RelativeOrientationSensor: RelativeOrientationSensor;\r\n};\r\n\r\ntype Vector3 = {\r\n    x: number;\r\n    y: number;\r\n    z: number;\r\n};\r\ntype Quaternion = {\r\n    x: number;\r\n    y: number;\r\n    z: number;\r\n    w: number;\r\n};\r\n\r\ntype SensorData = {\r\n    Accelerometer: null | Vector3;\r\n    Gyroscope: null | Vector3;\r\n    LinearAccelerationSensor: null | Vector3;\r\n    AbsoluteOrientationSensor: null | Quaternion;\r\n    RelativeOrientationSensor: null | Quaternion;\r\n};\r\n\r\nconst permissions: PermissionName[] = [\r\n    \"accelerometer\",\r\n    \"gyroscope\",\r\n    \"magnetometer\",\r\n] as any;\r\n\r\nexport class Sender {\r\n    static sensors: Sensors;\r\n\r\n    private static socket: Socket | null = null;\r\n    public static id: string | null;\r\n\r\n    public static get exists() {\r\n        return this.socket !== null;\r\n    }\r\n\r\n    private static send() {\r\n        if (!this.socket) return;\r\n\r\n        console.log(this.sensors);\r\n\r\n        const data: SensorData = {\r\n            Accelerometer: isDefined(this.sensors.Accelerometer.x)\r\n                ? {\r\n                      x: this.sensors.Accelerometer.x,\r\n                      y: this.sensors.Accelerometer.y,\r\n                      z: this.sensors.Accelerometer.z,\r\n                  }\r\n                : null,\r\n            Gyroscope: isDefined(this.sensors.Gyroscope.x)\r\n                ? {\r\n                      x: this.sensors.Gyroscope.x,\r\n                      y: this.sensors.Gyroscope.y,\r\n                      z: this.sensors.Gyroscope.z,\r\n                  }\r\n                : null,\r\n            LinearAccelerationSensor: isDefined(\r\n                this.sensors.LinearAccelerationSensor.x\r\n            )\r\n                ? {\r\n                      x: this.sensors.LinearAccelerationSensor.x,\r\n                      y: this.sensors.LinearAccelerationSensor.y,\r\n                      z: this.sensors.LinearAccelerationSensor.z,\r\n                  }\r\n                : null,\r\n            AbsoluteOrientationSensor: isDefined(\r\n                this.sensors.AbsoluteOrientationSensor.quaternion\r\n            )\r\n                ? {\r\n                      x: this.sensors.AbsoluteOrientationSensor.quaternion[0],\r\n                      y: this.sensors.AbsoluteOrientationSensor.quaternion[1],\r\n                      z: this.sensors.AbsoluteOrientationSensor.quaternion[2],\r\n                      w: this.sensors.AbsoluteOrientationSensor.quaternion[3],\r\n                  }\r\n                : null,\r\n            RelativeOrientationSensor: isDefined(\r\n                this.sensors.RelativeOrientationSensor.quaternion\r\n            )\r\n                ? {\r\n                      x: this.sensors.RelativeOrientationSensor.quaternion[0],\r\n                      y: this.sensors.RelativeOrientationSensor.quaternion[1],\r\n                      z: this.sensors.RelativeOrientationSensor.quaternion[2],\r\n                      w: this.sensors.RelativeOrientationSensor.quaternion[3],\r\n                  }\r\n                : null,\r\n        };\r\n\r\n        this.socket.send(\"data\", data);\r\n    }\r\n\r\n    public static create() {\r\n        if (this.socket) {\r\n            return;\r\n        }\r\n        this.socket = io(\"https://generative-sensors.herokuapp.com/\");\r\n\r\n        this.socket.on(\"connect\", () => {\r\n            console.log(\"[Socket] connected\");\r\n        });\r\n        this.socket.on(\"disconnect\", () => {\r\n            console.log(\"[Socket] disconnected\");\r\n        });\r\n        this.socket.on(\"message\", (message, data) => {\r\n            switch (message) {\r\n                case \"id\":\r\n                    this.id = data;\r\n            }\r\n        });\r\n        this.socket.connect();\r\n\r\n        this.sensors = {\r\n            Accelerometer: new Accelerometer({ frequency: 60 }),\r\n            Gyroscope: new Gyroscope(),\r\n            LinearAccelerationSensor: new LinearAccelerationSensor({\r\n                frequency: 60,\r\n            }),\r\n            AbsoluteOrientationSensor: new AbsoluteOrientationSensor({\r\n                frequency: 60,\r\n            }),\r\n            RelativeOrientationSensor: new RelativeOrientationSensor({\r\n                frequency: 60,\r\n            }),\r\n        };\r\n\r\n        Promise.all(\r\n            permissions.map(async (perm) => {\r\n                try {\r\n                    const result = await navigator.permissions.query({\r\n                        name: perm,\r\n                    });\r\n                    return result;\r\n                } catch (error) {\r\n                    console.warn(error);\r\n                }\r\n            })\r\n        )\r\n            .then((result) => {\r\n                Object.values(this.sensors).forEach((sensor) => sensor.start());\r\n            })\r\n            .catch((error) => console.warn(error));\r\n\r\n        setInterval(() => this.send(), 50);\r\n\r\n        return this.socket;\r\n    }\r\n}\r\n","import React from \"react\";\nimport screenfull from \"screenfull\";\nimport \"./App.css\";\nimport { Sender } from \"./Sender\";\nimport { isDefined } from \"./utils/isDefined\";\n\ninterface IAppState {}\n\nexport default class App extends React.Component<{}, IAppState> {\n    state: IAppState = {};\n\n    constructor(props: {}) {\n        super(props);\n\n        Sender.create();\n    }\n\n    componentDidMount() {\n        setInterval(() => {\n            this.forceUpdate();\n        }, 1000);\n    }\n\n    render() {\n        return (\n            <div\n                className=\"wrapper\"\n                onClick={() => {\n                    if (screenfull.isEnabled) {\n                        screenfull.request();\n                    }\n                }}\n            >\n                <div className=\"status\">\n                    <div\n                        className={\n                            isDefined(Sender.sensors.Accelerometer.x)\n                                ? \"accepted\"\n                                : undefined\n                        }\n                    >\n                        Accelerometer\n                    </div>\n                    <div\n                        className={\n                            isDefined(Sender.sensors.Gyroscope.x)\n                                ? \"accepted\"\n                                : undefined\n                        }\n                    >\n                        Gyroscope\n                    </div>\n                    <div\n                        className={\n                            isDefined(Sender.sensors.LinearAccelerationSensor.x)\n                                ? \"accepted\"\n                                : undefined\n                        }\n                    >\n                        LinearAccelerationSensor\n                    </div>\n                    <div\n                        className={\n                            isDefined(\n                                Sender.sensors.AbsoluteOrientationSensor\n                                    .quaternion\n                            )\n                                ? \"accepted\"\n                                : undefined\n                        }\n                    >\n                        AbsoluteOrientationSensor\n                    </div>\n                    <div\n                        className={\n                            isDefined(\n                                Sender.sensors.RelativeOrientationSensor\n                                    .quaternion\n                            )\n                                ? \"accepted\"\n                                : undefined\n                        }\n                    >\n                        RelativeOrientationSensor\n                    </div>\n                </div>\n                <div className=\"id\">\n                    {Sender.id ? Sender.id : \"Connecting...\"}\n                </div>\n            </div>\n        );\n    }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nconst location = window.location;\n\nif (location.protocol !== \"https:\" && !location.href.includes(\"localhost\")) {\n    location.replace(\n        `https:${location.href.substring(location.protocol.length)}`\n    );\n}\n\nReactDOM.render(\n    <React.StrictMode>\n        <App />\n    </React.StrictMode>,\n    document.getElementById(\"root\")\n);\n"],"sourceRoot":""}